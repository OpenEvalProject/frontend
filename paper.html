<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manuscript Analysis - OpenEval Project</title>
    <link rel="stylesheet" href="/css/styles.css?v=18" />
    <!-- DataTables CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"
    />
    <!-- Marked.js for markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked@11.0.0/marked.min.js"></script>
  </head>
  <body class="paper-detail-page">
    <header>
      <h1>OpenEval Project</h1>
      <nav>
        <a href="/index.html">‚Üê Back to Manuscripts</a>
        <a href="/papers-search.html"><button>Search Papers</button></a>
        <a href="/results.html"><button>Explore Results</button></a>
        <span id="user-info"></span>
        <button id="login-btn">Login with ORCID</button>
        <button id="logout-btn" style="display: none">Logout</button>
      </nav>
    </header>

    <main class="paper-main-container">
      <div id="loading">Loading manuscript analysis...</div>
      <div id="error" style="display: none"></div>

      <div id="paper-layout" class="two-column-layout" style="display: none">
        <!-- LEFT COLUMN: Manuscript Viewer (Always Visible) -->
        <section class="manuscript-column">
          <div class="manuscript-column-header">
            <h2 id="manuscript-title-compact">Manuscript</h2>
          </div>

          <div class="manuscript-scroll-container">
            <div id="manuscript-loading-left" class="loading-message">
              Loading manuscript...
            </div>
            <div
              id="manuscript-error-left"
              class="error-message"
              style="display: none"
            ></div>
            <div
              id="manuscript-rendered-left"
              class="rendered-markdown"
              style="display: none"
            >
              <!-- Rendered markdown with claim highlights will appear here -->
            </div>
          </div>
        </section>

        <!-- RIGHT COLUMN: Metrics, Tables, Results -->
        <section class="metrics-column">
          <div class="metrics-column-header">
            <h2>Overview</h2>
          </div>

          <div class="metrics-scroll-container">
            <!-- Summary Text -->
            <div class="summary-text" id="summary-text">
              <!-- Populated by JavaScript -->
            </div>

            <!-- Summary Statistics Cards -->
            <div class="summary-stats-compact">
              <div class="stats-grid-compact">
                <div
                  class="stat-card-compact clickable"
                  data-target="claims-container"
                >
                  <div class="stat-value" id="total-claims">0</div>
                  <div class="stat-label">Claims</div>
                </div>
                <div
                  class="stat-card-compact clickable"
                  data-target="llm-results-container"
                >
                  <div class="stat-value" id="total-results-llm">0</div>
                  <div class="stat-label">OpenEval</div>
                  <div
                    class="stat-breakdown-mini"
                    id="llm-breakdown"
                    style="display: none"
                  >
                    <span class="mini-badge status-supported"
                      ><span id="llm-supported-count">0</span></span
                    >
                    <span class="mini-badge status-unsupported"
                      ><span id="llm-unsupported-count">0</span></span
                    >
                    <span class="mini-badge status-uncertain"
                      ><span id="llm-uncertain-count">0</span></span
                    >
                  </div>
                </div>
                <div
                  class="stat-card-compact clickable"
                  data-target="peer-results-container"
                  id="peer-results-stat"
                  style="display: none"
                >
                  <div class="stat-value" id="total-results-peer">0</div>
                  <div class="stat-label">Peer Review</div>
                  <div
                    class="stat-breakdown-mini"
                    id="peer-breakdown"
                    style="display: none"
                  >
                    <span class="mini-badge status-supported"
                      ><span id="peer-supported-count">0</span></span
                    >
                    <span class="mini-badge status-unsupported"
                      ><span id="peer-unsupported-count">0</span></span
                    >
                    <span class="mini-badge status-uncertain"
                      ><span id="peer-uncertain-count">0</span></span
                    >
                  </div>
                </div>
                <div
                  class="stat-card-compact clickable"
                  data-target="comparison-section"
                  id="comparisons-stat"
                  style="display: none"
                >
                  <div class="stat-value" id="total-comparisons">0</div>
                  <div class="stat-label">Comparisons</div>
                </div>
              </div>
            </div>

            <!-- Claims Section -->
            <div class="collapsible-section">
              <div id="claims-container" class="collapsible-content collapsed">
                <!-- Claims table populated by JavaScript -->
              </div>
            </div>

            <!-- OpenEval Results Section -->
            <div class="collapsible-section">
              <div
                id="llm-results-container"
                class="collapsible-content collapsed"
              >
                <!-- LLM results populated by JavaScript -->
              </div>
            </div>

            <!-- Peer Results Section -->
            <div class="collapsible-section">
              <div
                id="peer-results-container"
                class="collapsible-content collapsed"
              >
                <!-- Peer results populated by JavaScript -->
              </div>
            </div>

            <!-- Comparison Section -->
            <div class="collapsible-section">
              <div
                id="comparison-section"
                class="collapsible-content collapsed"
              >
                <!-- Comparison table populated by JavaScript -->
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="/js/common.js?v=17"></script>
    <script src="/js/claim-highlighter.js?v=2"></script>
    <script src="/js/paper.js?v=17"></script>
  </body>
</html>
